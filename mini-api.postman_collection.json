{
  "info": {
    "name": "Mini API - Salon de Coiffure",
    "description": "Collection complète des endpoints API pour l'application de gestion de salons de coiffure",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentification",
      "description": "Endpoints pour l'authentification et la gestion des utilisateurs",
      "item": [
        {
          "name": "Inscription Client",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Jean\",\n  \"lastName\": \"Dupont\",\n  \"email\": \"jean.dupont@example.com\",\n  \"password\": \"password123\",\n  \"phone\": \"+33123456789\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Créer un nouveau compte client"
          },
          "response": []
        },
        {
          "name": "Connexion Client",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jean.dupont@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Se connecter avec un compte client",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    pm.collectionVariables.set('jwt_token', response.token);",
                    "    pm.collectionVariables.set('refresh_token', response.refreshToken);",
                    "}"
                  ]
                }
              }
            ]
          },
          "response": []
        },
        {
          "name": "Rafraîchir Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "Rafraîchir le token JWT expiré"
          },
          "response": []
        },
        {
          "name": "Informations Utilisateur",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/me",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "me"]
            },
            "description": "Récupérer les informations de l'utilisateur connecté"
          },
          "response": []
        },
        {
          "name": "Vérification Email",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/verify-email?token=verification_token_here",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "verify-email"],
              "query": [
                {
                  "key": "token",
                  "value": "verification_token_here"
                }
              ]
            },
            "description": "Vérifier l'adresse email avec le token reçu par email"
          },
          "response": []
        },
        {
          "name": "Renvoyer Vérification Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jean.dupont@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/resend-verification",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "resend-verification"]
            },
            "description": "Renvoyer l'email de vérification"
          },
          "response": []
        },
        {
          "name": "Mot de Passe Oublié",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jean.dupont@example.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/forgot-password",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "forgot-password"]
            },
            "description": "Demander la réinitialisation du mot de passe"
          },
          "response": []
        },
        {
          "name": "Réinitialiser Mot de Passe",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset_token_here\",\n  \"password\": \"newpassword123\",\n  \"passwordConfirm\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/reset-password",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "reset-password"]
            },
            "description": "Réinitialiser le mot de passe avec le token reçu"
          },
          "response": []
        },
        {
          "name": "Inscription Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Admin\",\n  \"lastName\": \"System\",\n  \"email\": \"admin@example.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/register",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "register"]
            },
            "description": "Créer un compte administrateur"
          },
          "response": []
        },
        {
          "name": "Connexion Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/login",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "login"]
            },
            "description": "Se connecter avec un compte administrateur"
          },
          "response": []
        },
        {
          "name": "Vérifier OTP Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"otp\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/admin/verify-otp",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "verify-otp"]
            },
            "description": "Vérifier le code OTP pour l'admin"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Salons",
      "description": "Gestion des salons de coiffure",
      "item": [
        {
          "name": "Lister les Salons",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/salons?page=1&limit=20&city=Paris&name=Beauté",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Numéro de page"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Nombre d'éléments par page"
                },
                {
                  "key": "city",
                  "value": "Paris",
                  "description": "Filtrer par ville"
                },
                {
                  "key": "name",
                  "value": "Beauté",
                  "description": "Filtrer par nom"
                }
              ]
            },
            "description": "Récupérer la liste des salons avec filtres optionnels"
          },
          "response": []
        },
        {
          "name": "Détails Salon",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1"]
            },
            "description": "Récupérer les détails complets d'un salon"
          },
          "response": []
        },
        {
          "name": "Créer un Salon",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Salon Beauté Parisienne\",\n  \"address\": \"123 Rue de la Beauté, 75001 Paris\",\n  \"city\": \"Paris\",\n  \"lat\": 48.8566,\n  \"lng\": 2.3522,\n  \"openHours\": {\n    \"monday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"tuesday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"wednesday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"thursday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"friday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"saturday\": {\"open\": \"09:00\", \"close\": \"17:00\"},\n    \"sunday\": null\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/salons",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons"]
            },
            "description": "Créer un nouveau salon (nécessite ROLE_OWNER)"
          },
          "response": []
        },
        {
          "name": "Modifier un Salon",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Nouveau Nom du Salon\",\n  \"address\": \"Nouvelle Adresse\",\n  \"city\": \"Nouvelle Ville\",\n  \"lat\": 48.8606,\n  \"lng\": 2.3376,\n  \"openHours\": {\n    \"monday\": {\"open\": \"10:00\", \"close\": \"19:00\"}\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1"]
            },
            "description": "Modifier un salon existant (permissions requises)"
          },
          "response": []
        },
        {
          "name": "Disponibilités Salon",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1/availability?serviceId=1&stylistId=2&date=2024-01-15&duration=60",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1", "availability"],
              "query": [
                {
                  "key": "serviceId",
                  "value": "1",
                  "description": "ID du service demandé"
                },
                {
                  "key": "stylistId",
                  "value": "2",
                  "description": "ID du coiffeur souhaité (optionnel)"
                },
                {
                  "key": "date",
                  "value": "2024-01-15",
                  "description": "Date souhaitée (format YYYY-MM-DD)"
                },
                {
                  "key": "duration",
                  "value": "60",
                  "description": "Durée en minutes (défaut: 60)"
                }
              ]
            },
            "description": "Vérifier les créneaux disponibles pour un salon"
          },
          "response": []
        },
        {
          "name": "Modifier Horaires Salon",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"openHours\": {\n    \"monday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"tuesday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"wednesday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"thursday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"friday\": {\"open\": \"09:00\", \"close\": \"18:00\"},\n    \"saturday\": {\"open\": \"09:00\", \"close\": \"17:00\"},\n    \"sunday\": null\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1/hours",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1", "hours"]
            },
            "description": "Modifier les horaires d'ouverture d'un salon"
          },
          "response": []
        },
        {
          "name": "Supprimer un Salon",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1"]
            },
            "description": "Supprimer un salon (permissions requises)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Réservations",
      "description": "Gestion des réservations de services",
      "item": [
        {
          "name": "Créer une Réservation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"salonId\": 1,\n  \"stylistId\": 2,\n  \"serviceId\": 3,\n  \"startAt\": \"2024-01-15 14:00:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/bookings",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "bookings"]
            },
            "description": "Créer une nouvelle réservation (nécessite ROLE_CLIENT)"
          },
          "response": []
        },
        {
          "name": "Annuler une Réservation",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/bookings/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "bookings", "1"]
            },
            "description": "Annuler une réservation existante"
          },
          "response": []
        },
        {
          "name": "Mes Réservations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/bookings/my",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "bookings", "my"]
            },
            "description": "Récupérer toutes les réservations de l'utilisateur connecté"
          },
          "response": []
        },
        {
          "name": "Réservations à Venir",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/bookings/upcoming",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "bookings", "upcoming"]
            },
            "description": "Récupérer les réservations futures de l'utilisateur connecté"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Coiffeurs",
      "description": "Gestion des coiffeurs (stylists)",
      "item": [
        {
          "name": "Ajouter un Coiffeur",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3,\n  \"languages\": [\"Français\", \"Anglais\"],\n  \"skillIds\": [1, 2, 3]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1/stylists",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1", "stylists"]
            },
            "description": "Ajouter un coiffeur à un salon (permissions requises)"
          },
          "response": []
        },
        {
          "name": "Retirer un Coiffeur",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/stylists/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "stylists", "1"]
            },
            "description": "Retirer un coiffeur d'un salon (permissions requises)"
          },
          "response": []
        },
        {
          "name": "Uploader Médias Coiffeur",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": [],
                  "description": "Fichiers images (JPG, PNG, WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/v1/stylists/1/media",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "stylists", "1", "media"]
            },
            "description": "Uploader des photos pour le portfolio d'un coiffeur"
          },
          "response": []
        },
        {
          "name": "Lister Médias Coiffeur",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/stylists/1/media",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "stylists", "1", "media"]
            },
            "description": "Récupérer la liste des médias d'un coiffeur"
          },
          "response": []
        },
        {
          "name": "Supprimer Média Coiffeur",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/stylists/1/media/5",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "stylists", "1", "media", "5"]
            },
            "description": "Supprimer un média du portfolio d'un coiffeur"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Services",
      "description": "Gestion des services proposés par les salons",
      "item": [
        {
          "name": "Créer un Service",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Coupe Classique\",\n  \"description\": \"Coupe de cheveux classique pour hommes\",\n  \"durationMinutes\": 30,\n  \"priceCents\": 2500\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/salons/1/services",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "salons", "1", "services"]
            },
            "description": "Créer un nouveau service pour un salon"
          },
          "response": []
        },
        {
          "name": "Modifier un Service",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Coupe Premium\",\n  \"description\": \"Coupe de cheveux premium avec soin\",\n  \"durationMinutes\": 45,\n  \"priceCents\": 3500\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/services/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "services", "1"]
            },
            "description": "Modifier un service existant"
          },
          "response": []
        },
        {
          "name": "Supprimer un Service",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/services/1",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "services", "1"]
            },
            "description": "Supprimer un service"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Liste d'Attente",
      "description": "Gestion de la liste d'attente pour les réservations",
      "item": [
        {
          "name": "S'inscrire en Liste d'Attente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"salonId\": 1,\n  \"serviceId\": 2,\n  \"stylistId\": 3,\n  \"preferredDateTime\": \"2024-01-15 14:00:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/waitlist",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "waitlist"]
            },
            "description": "S'inscrire en liste d'attente pour un créneau indisponible"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Exceptions de Disponibilité",
      "description": "Gestion des exceptions aux horaires d'ouverture",
      "item": [
        {
          "name": "Créer une Exception",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"salonId\": 1,\n  \"stylistId\": 2,\n  \"startDateTime\": \"2024-01-15 09:00:00\",\n  \"endDateTime\": \"2024-01-15 12:00:00\",\n  \"reason\": \"Formation interne\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/availability-exceptions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "availability-exceptions"]
            },
            "description": "Créer une exception de disponibilité (fermeture exceptionnelle, congé, etc.)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Données de Test",
      "description": "Endpoints pour créer des données de test",
      "item": [
        {
          "name": "Créer Données Coiffeur Test",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/create-stylist-data",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "create-stylist-data"]
            },
            "description": "Créer des données de test pour les coiffeurs"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script de pré-requête pour définir l'authentification automatique",
          "// Vous pouvez ajouter ici des scripts personnalisés si nécessaire"
        ]
      }
    }
  ]
}
